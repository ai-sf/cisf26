{{ define "main" }}
    <style>
        .form-info-button {
            text-align: end;
        }
    </style>
    <div class="page-content" id="subscriptions-page">
        <!-- Modal -->
        <div id="form-info-modal" class="base-modal">
            <div class="base-modal-content" style="max-height: 500px !important;">
                <div class="modal-info body" style="text-align: left;user-select: none;‑webkit‑user‑select: none;margin-top: 1rem;font-size: .95rem; line-height: 1.5;
    color: #333;
    text-align: left;
    max-height: 280px;
    overflow-y: auto;"></div>

                <button class="close-modal">
                    <i class="fa-solid fa-circle-xmark"></i>
                </button>
            </div>
        </div>
        <div class="container">

            <div id="warningContainer">
                <div class="box">
                    <i class="fa-solid fa-triangle-exclamation exclamation"></i>
                    <p>Le iscrizioni all'evento non sono ancora aperte.</p>
                </div>
            </div>

            <div id="closedContainer" style="display: none;">
                <div class="box">
                    <i class="fa-solid fa-triangle-exclamation exclamation"></i>
                    <p>Le iscrizioni si sono chiuse. Attendi l'esito.</p>
                </div>
            </div>


            <div id="successContainer" style="display: none;">
                <div class="form-card">
                    <div class="form-content">
                        <div class="cookie-success" id="confirmationMessage">
                            <div class="success-icon"></div>
                            <h3>Grazie!</h3>
                            <p>Abbiamo ricevuto le tue informazioni.
                                I risultati verranno condivisi entro il 10 Gennaio 2026 all'indirizzo email specificato durante la registrazione.<br />
                                Qualora dovessi essere selezionat, il pagamento della quota di iscrizione dovrà essere effettuato entro e non oltre Giovedì <strong>15 Gennaio 2026</strong> alle ore 23:59,
                                pena l’esclusione dall’evento.
                            </p>

                            <div>
                                {{ partial "subscription-form/selection-criteria-button.html" . }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="formContainer" style="display: none;">
                <div class="form-card">
                    <div class="form-info-button">
                        <a data-modal-target="#form-info-modal" style="cursor: pointer; font-weight: 600">
                            Info e Criteri di Selezione
                        </a>
                    </div>

<!--                    <a class="cisf-info-fab-button" href="#!"-->
<!--                    data-modal-target="#form-info-modal">-->
<!--                        <i class="fa-solid fa-question"></i>-->
<!--                    </a>-->
                    <div class="decorative-element"></div>
                    <div class="form-content">
                        <div class="form-header">
                            <h1 class="form-title">Cominciamo</h1>
                            <p class="form-subtitle">Aiutaci a conoscerti e comprendere i tuoi bisogni in pochi step</p>
                        </div>

                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <div class="progress-steps">
                                <span class="progress-step active" data-step="1" data-number="1">Su di te</span>
                                <span class="progress-step" data-step="2" data-number="2">Dettagli aggiuntivi</span>
                                <span class="progress-step" data-step="3" data-number="3">Università</span>
                                <span class="progress-step" data-step="4" data-number="4">AISF</span>
                                <span class="progress-step" data-step="5" data-number="5">CISF26</span>
                                <span class="progress-step" data-step="6" data-number="6">Ultimo step</span>
                            </div>
                        </div>

                        <div class="error-message" id="errorMessage"></div>

                        <form id="multiStepForm" target="hidden_iframe">
                            <!-- Step 1 -->
                            {{ partial "subscription-form/first-step.html" . }}
                            <!-- Step 2 -->
                            {{ partial "subscription-form/second-step.html" . }}
                            <!-- Step 3 -->
                            {{ partial "subscription-form/third-step.html" . }}
                            <!-- Step 4 -->
                            {{ partial "subscription-form/fourth-step.html" . }}
                            <!-- Step 5 -->
                            {{ partial "subscription-form/fifth-step.html" . }}
                            <!-- Step 6 -->
                            {{ partial "subscription-form/sixth-step.html" . }}


                            <div class="button-group">
                                <button type="button" class="btn-secondary" id="prevBtn" style="display: none;">Indietro</button>
                                <button type="button" class="btn-primary" id="nextBtn">Continua</button>
                            </div>
                        </form>

                        <div class="success-message" id="successMessage">
                            <div class="success-icon"></div>
                            <h3>Grazie!</h3>
                            <p>Abbiamo ricevuto le tue informazioni.
                                I risultati verranno condivisi a partire dal 10 Gennaio 2026 all'indirizzo email specificato durante la registrazione.<br />
                                Qualora dovessi essere selezionat, il pagamento della quota di iscrizione dovrà essere effettuato entro e non oltre Giovedì <strong>15 Gennaio 2026</strong> alle ore 23:59,
                                pena l’esclusione dall’evento.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{{ end }}